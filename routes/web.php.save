<?php

/*
|--------------------------------------------------------------------------
| Application Routes
|--------------------------------------------------------------------------
|
| Here is where you can register all of the routes for an application.
| It is a breeze. Simply tell Lumen the URIs it should respond to
| and give it the Closure to call when that URI is requested.
|
*/

$app->get('/', function () use ($app) {
	return $app->version();
});


$app->get('/bts_off', 'BtsController@get_bts_off'); 
// fixingSiteToRTPO
$app->get('/fixingSiteToRTPO', 'BtsController@fixingSiteToRTPO');
// getNumberConfig
$app->post('/getNumberConfig', 'ConfigAppController@getNumberConfig');


// fixingSiteToRTPO
// convertSitetmpToQueryInsert 
$app->get('/convertSitetmpToQueryInsert', 'BtsController@convertSitetmpToQueryInsert');
// setclassSite
$app->get('/setclassSite', 'BtsController@setclassSite');

$app->post('/register', 'UserController@register'); 
$app->post('/users_update', 'UserController@users_update'); 

$app->post('/login', 'UserController@login'); 
// loginApp
$app->post('/loginApp', 'UserController@loginApp'); 
$app->get('/user/{id}', ['middleware' => 'auth', 'uses' =>  'UserController@get_user']);
$app->post('/loginUserArea', 'UserController@loginUserArea'); 
$app->post('/cekUserType', 'UserController@cekUserType');
$app->post('/cekUserPIN', 'UserController@cekUserPIN');


// fungsi saat server private memberitahukan bahwa status mbp sudah berubah dari mainfail menjadi normal atau sebaliknya
$app->post('/setSiteMainsFail', 'SiteController@setSiteMainsFail'); 
$app->post('/update_report_location', 'SiteController@update_report_location'); 
$app->post('/updateSiteMainsFail', 'SiteController@updateSiteMainsFail'); 

$app->get('/cekFileMt', 'SiteController@cekFileMt'); 
$app->post('/cekFileMaintenance', 'SiteController@cekFileMaintenance'); 
$app->post('/cekFileReplacement', 'SiteController@cekFileReplacement'); 


$app->post('/cekSamplingFormula', 'RtpoController@cekSamplingFormula');
$app->post('/insertSamplingSite', 'RtpoController@insertSamplingSite');
$app->post('/getListSamplingSite', 'RtpoController@getListSamplingSite');
$app->post('/getDetailSamplingSite', 'RtpoController@getDetailSamplingSite');
$app->post('/checkDistanceSamplingSite', 'RtpoController@checkDistanceSamplingSite');
$app->post('/createSamplingSite', 'RtpoController@createSamplingSite');
$app->post('/getFinishSamplingSite', 'RtpoController@getFinishSamplingSite');
$app->post('/updateSyncSamplingSite', 'RtpoController@updateSyncSamplingSite');
$app->post('/updateFlagSamplingSite', 'RtpoController@updateFlagSamplingSite');
$app->post('/createSamplingSiteFlag', 'RtpoController@createSamplingSiteFlag');





//-> fungsi untuk melihat lokasi dan status emua site dan semua rtpo sampai rtpo memberikan tugas..
//. memberpihatkan semua status site dan mbp ke map.
$app->post('/getMyMbpSiteToMAp', 'MapController@getMyMbpSiteToMAp');
$app->post('/getAlarmSiteCorrective', 'MapController@getAlarmSiteCorrective');

//. fungsi rekomendasi menggunakan google matrix api, nnti di pikir lagi enaknya gmn.. hehee..
// getSiteDariMbpTerdekat
$app->post('/getSiteDariMbpTerdekat', 'RecommendationController@getSiteDariMbpTerdekat'); //DONE..:D dan 
$app->post('/getSiteTerdekatDariMbp', 'RecommendationController@getSiteTerdekatDariMbp'); //DONE..:D
$app->post('/getSiteTercepatDariMbp', 'RecommendationController@getSiteTercepatDariMbp'); //DONE..:D
$app->post('/getMbpDariSiteTerdekat', 'RecommendationController@getMbpDariSiteTerdekat'); //DONE..:D
//. fungsi rekomendasi menggunakan google matrix api dan sudah dikombinasikan dengan class site tertinggi, nnti di pikir lagi enaknya gmn.. hehee..
$app->post('/getSiteClassTertinggiDariMbpTercepat', 'RecommendationController@getSiteClassTertinggiDariMbpTercepat'); //DONE..:D dan 
$app->post('/getSiteClassTertinggiDariMbpTerdekat', 'RecommendationController@getSiteClassTertinggiDariMbpTerdekat'); //DONE..:D dan
//. rtpo memberikan tugas kepada mbp menuju site tertentu
/*cek pengiriman notif*/$app->post('/requestMbpToSiteDown', 'RtpoController@requestMbpToSiteDown'); 
/*cek pengiriman notif*/$app->post('/requestMbpToSiteDownNew', 'RtpoController@requestMbpToSiteDownNew'); 
// fungsi untuk membatalkan penugasan mbp ke site dari sisi rtpo
/*cek pengiriman notif*/$app->post('/cancelRequestMbpToSiteDown', 'RtpoController@cancelRequestMbpToSiteDown'); 



//-> fungsi untuk melakukan tugas dari rtpo -> mbp melaksanakan tugas dengan benar hingga done
//. mbp melihat statusnya sendiri
$app->post('/getStatusMbp', 'MbpController@getStatusMbp');
$app->post('/getStatusMbp1', 'MbpController@getStatusMbp1');
$app->post('/getStatusMbpNew', 'MbpController@getStatusMbpNew');
//. mengupdate status mbp menjadi sesuai keinginan, entah dia minta dijadiin (on progress, chck'in atau kembali ke available)
/*cek pengiriman notif*/$app->post('/updateStatusMbp', 'MbpController@updateStatusMbp');
/*cek pengiriman notif*/$app->post('/updateStatusMbpNew', 'MbpController@updateStatusMbpNew');
$app->post('/updateStatusMbp1', 'MbpController@updateStatusMbp1');
$app->post('/misiPenyelamatanDataMbp', 'MbpController@misiPenyelamatanDataMbp');



//-> fungsi untuk mbp melakukan pembatalan penugasan -> rtpo memberikan aksi terhadap pengajuan tersebut
//. mbp mengirim pengajuan pembatalan penugasan kepada rtpo
/*cek pengiriman notif*/$app->post('/sendCancellationLetterToRtpo', 'CancelController@sendCancellationLetterToRtpo'); 
/*cek pengiriman notif*/$app->post('/sendCancellationLetterToRtpoNew', 'CancelController@sendCancellationLetterToRtpoNew'); 
//. dan bila mbp ingin membatalkan pengajuannya, maka tinggal di delete aja dan tidak muncul di halaman rtpo
/*cek pengiriman notif*/$app->post('/deleteCancellationLetterFromMbp1', 'CancelController@deleteCancellationLetterFromMbp1');
/*cek pengiriman notif*/$app->post('/deleteCancellationLetterFromMbp', 'CancelController@deleteCancellationLetterFromMbp');/*(v)*/
// rtpo bisa melihat list pengajuan pembatalan dari mbp-mbpnya (bila sudah di lakukan aksi pada pesan tersebut maka tinggal di beri flag)
$app->post('/deleteCancellationLetterFromMbpTest', 'CancelController@deleteCancellationLetterFromMbpTest');/*(v)*/


$app->post('/getCancellationLetter1', 'CancelController@getCancellationLetter1');
$app->post('/getCancellationLetter', 'CancelController@getCancellationLetter');  
$app->post('/getCancellationLetterPaginate', 'CancelController@getCancellationLetterPaginate');  
// rtpo melihat detil dari pengajuan mbp
$app->post('/getMessageDetil1', 'MessageController@getMessageDetil1'); 
$app->post('/getMessageDetil', 'MessageController@getMessageDetil'); 
// disini merupakan aksi untuk melakukan persetujuan atau tidak menyetujui dengan yang di ajukan mbp 
/*cek pengiriman notif*/$app->post('/cancellationStatementRtpo1', 'CancelController@cancellationStatementRtpo1'); /*(v)*/
/*cek pengiriman notif*/$app->post('/cancellationStatementRtpo', 'CancelController@cancellationStatementRtpo'); /*(v)*/


//-> fungsi untuk mbp melakukan pemberitahuan delay -> rtpo memberikan aksi terhadap pengajuan tersebut (di genti dan dibatalkan / di)
// mengirimkan pesan pemberitahuan tentang delay yang dilakukan oleh mbp
/*cek pengiriman notif*/$app->post('/sendDelayLetterToRtpo', 'CancelController@sendDelayLetterToRtpo'); 
/*cek pengiriman notif*/$app->post('/sendDelayLetterToRtpoNew', 'CancelController@sendDelayLetterToRtpoNew'); 
// rtpo bisa melihat list pengajuan pembatalan dari mbp-mbpnya (bila sudah di lakukan aksi pada pesan tersebut maka tinggal di beri flag)
$app->post('/getCancellationLetter', 'CancelController@getCancellationLetter');  
// fungsi ini digunakan mbp bila delay yang mereka rasakan telah usai
/*cek pengiriman notif*/$app->post('/finishDelayFromMbp', 'CancelController@finishDelayFromMbp');/*(v)*/ //belim mencantumkan nama mbp
// delayStatementRtpo
/*cek pengiriman notif*/$app->post('/delayStatementRtpo1', 'CancelController@delayStatementRtpo1');/*(v)*/
/*cek pengiriman notif*/$app->post('/delayStatementRtpo', 'CancelController@delayStatementRtpo');/*(v)*/


//-> MELIHAT STATUS AKTIF DAN  TIDAK AKTIF DARI MBP -> DIA MERUBAH STATUSNYA SENDIRI
// upoController@requestMbpToSiteDown'); 
/*cek pengiriman notif*/$app->post('/requestMbpToSiteDownNew', 'RtpoController@requestMbpToSiteDownNew'); 
// fungsi untuk membatalkan penugasan mbp ke site dari sisi rtpo
/*cek pengiriman notif*/$app->post('/cancelRequestMbpToSiteDown', 'RtpoController@cancelRequestMbpToSiteDown'); 



//-> fungsi untuk melakukan tugas dari rtpo -> mbp melaksanakan tugas dengan benar hingga done
//. mbp melihat statusnya sendiri
$app->post('/getStatusMbp', 'MbpController@getStatusMbp');
$app->post('/getStatusMbp1', 'MbpController@getStatusMbp1');
$app->post('/getStatusMbpNew', 'MbpController@getStatusMbpNew');
//. mengupdate status mbp menjadi sesuai keinginan, entah dia minta dijadiin (on progress, chck'in atau kembali ke available)
/*cek pengiriman notif*/$app->post('/updateStatusMbp', 'MbpController@updateStatusMbp');
/*cek pengiriman notif*/$app->post('/updateStatusMbpNew', 'MbpController@updateStatusMbpNew');
$app->post('/updateStatusMbp1', 'MbpController@updateStatusMbp1');
$app->post('/misiPenyelamatanDataMbp', 'MbpController@misiPenyelamatanDataMbp');



//-> fungsi untuk mbp melakukan pembatalan penugasan -> rtpo memberikan aksi terhadap pengajuan tersebut
//. mbp mengirim pengajuan pembatalan penugasan kepada rtpo
/*cek pengiriman notif*/$app->post('/sendCancellationLetterToRtpo', 'CancelController@sendCancellationLetterToRtpo'); 
/*cek pengiriman notif*/$app->post('/sendCancellationLetterToRtpoNew', 'CancelController@sendCancellationLetterToRtpoNew'); 
//. dan bila mbp ingin membatalkan pengajuannya, maka tinggal di delete aja dan tidak muncul di halaman rtpo
/*cek pengiriman notif*/$app->post('/deleteCancellationLetterFromMbp1', 'CancelController@deleteCancellationLetterFromMbp1');
/*cek pengiriman notif*/$app->post('/deleteCancellationLetterFromMbp', 'CancelController@deleteCancellationLetterFromMbp');/*(v)*/
// rtpo bisa melihat list pengajuan pembatalan dari mbp-mbpnya (bila sudah di lakukan aksi pada pesan tersebut maka tinggal di beri flag)
$app->post('/deleteCancellationLetterFromMbpTest', 'CancelController@deleteCancellationLetterFromMbpTest');/*(v)*/


$app->post('/getCancellationLetter1', 'CancelController@getCancellationLetter1');
$app->post('/getCancellationLetter', 'CancelController@getCancellationLetter');  
$app->post('/getCancellationLetterPaginate', 'CancelController@getCancellationLetterPaginate');  
// rtpo melihat detil dari pengajuan mbp
$app->post('/getMessageDetil1', 'MessageController@getMessageDetil1'); 
$app->post('/getMessageDetil', 'MessageController@getMessageDetil'); 
// disini merupakan aksi untuk melakukan persetujuan atau tidak menyetujui dengan yang di ajukan mbp 
/*cek pengiriman notif*/$app->post('/cancellationStatementRtpo1', 'CancelController@cancellationStatementRtpo1'); /*(v)*/
/*cek pengiriman notif*/$app->post('/cancellationStatementRtpo', 'CancelController@cancellationStatementRtpo'); /*(v)*/


//-> fungsi untuk mbp melakukan pemberitahuan delay -> rtpo memberikan aksi terhadap pengajuan tersebut (di genti dan dibatalkan / di)
// mengirimkan pesan pemberitahuan tentang delay yang dilakukan oleh mbp
/*cek pengiriman notif*/$app->post('/sendDelayLetterToRtpo', 'CancelController@sendDelayLetterToRtpo'); 
/*cek pengiriman notif*/$app->post('/sendDelayLetterToRtpoNew', 'CancelController@sendDelayLetterToRtpoNew'); 
// rtpo bisa melihat list pengajuan pembatalan dari mbp-mbpnya (bila sudah di lakukan aksi pada pesan tersebut maka tinggal di beri flag)
$app->post('/getCancellationLetter', 'CancelController@getCancellationLetter');  
// fungsi ini digunakan mbp bila delay yang mereka rasakan telah usai
/*cek pengiriman notif*/$app->post('/finishDelayFromMbp', 'CancelController@finishDelayFromMbp');/*(v)*/ //belim mencantumkan nama mbp
// delayStatementRtpo
/*cek pengiriman notif*/$app->post('/delayStatementRtpo1', 'CancelController@delayStatementRtpo1');/*(v)*/
/*cek pengiriman notif*/$app->post('/delayStatementRtpo', 'CancelController@delayStatementRtpo');/*(v)*/


//-> MELIHAT STATUS AKTIF DAN  TIDAK AKTIF DARI MBP -> DIA MERUBAH STATUSNYA SENDIRI
// u